import{c as y,a as se,o as U,b as L,d as z,g as B,e as G,f as ce,i as $,r as H,t as K,m as de,h as R,j as ae,F as ue}from"./chunks/chunk.329a80b1.js";const S="product-store",fe={1:{name:"Apple",description:"A very common fruit found literally everywhere"},2:{name:"Orange",description:"Another very common fruit found literally everywhere"},3:{name:"Cat Toy",description:"A very fun item for your cat"},4:{name:"Tablet",description:"A very weird stone tablet belonging to an ancient civilization"},5:{name:"Smartphone",description:"A very useful tool that can be addicting to some people"},6:{name:"Couch",description:"An instrument of resting that is very useful"},7:{name:"Car",description:"A useful transportation method for when it is raining"},8:{name:"Speakers",description:"A sound-amplifying device commonly used to play music"},9:{name:"Battery",description:"A commonly used storage and source of electricity"}},me=10;function pe(){const[f,c]=y({}),[m,p]=y(0),g=se(()=>{const t=f();return Object.keys(t).map(e=>({...t[e],id:e,description:t[e].description.length>24?t[e].description.slice(0,21)+"...":t[e].description}))});U(()=>{const t=localStorage.getItem(S+"-state");t&&c(JSON.parse(t));const e=localStorage.getItem(S+"-next");e&&p(parseInt(e))}),L(t=>{const e=f();return t||localStorage.setItem(S+"-state",JSON.stringify(e)),!1},!0),L(t=>{const e=m();return t||localStorage.setItem(S+"-next",e),!1},!0);function v(t){return{...f()[t],id:t}}function d(t,e){const r=m();return c(o=>{const b={name:t,description:e};return{...o,[r]:b}}),p(o=>o+1),r}function a(t,e=null,r=null){c(o=>{const b=o[t];return e&&(b.name=e),r&&(b.description=r),{...o}})}function l(t){c(e=>Object.keys(e).filter(r=>r!=t).reduce((r,o)=>(r[o]=e[o],r),{}))}function u(){c(fe),p(me)}return[g,d,v,a,l,u]}const ve=K('<div class="flex flex-col flex-1 bg-neutral-200 hover:bg-neutral-300 ml-4 mt-4 px-4 py-4 rounded-3xl cursor-pointer"><h3 class="font-thin">#<!#><!/></h3><h2 class="font-bold"></h2><p></p></div>');function be({product:f,onClick:c}){const{id:m,name:p,description:g}=f;return(()=>{const v=B(ve),d=v.firstChild,a=d.firstChild,l=a.nextSibling,[u,t]=G(l.nextSibling),e=d.nextSibling,r=e.nextSibling;return ce(v,"click",c,!0),$(d,()=>m.toString().padStart(4,"0"),u,t),$(e,p),$(r,g),H(),v})()}z(["click"]);const $e=K('<div id="products" class="flex flex-col min-h-[50vh]"><div id="products-modal-view"><div class="relative flex flex-col py-8 px-6 m-4 min-w-[50vw] min-h-[50vh] bg-neutral-200 rounded-3xl"><h2>#<!#><!/></h2><h1 class="text-2xl mt-4"></h1><p class="mt-4"></p><div class="flex mt-auto text-lg font-bold"><button class="pl-4 font-bold hover:underline">Edit</button><button class="pl-4 font-bold hover:underline">Delete</button><button class="pl-4 ml-auto font-bold hover:underline">Close</button></div></div></div><div id="products-modal-edit"><div class="relative flex flex-col py-8 px-6 m-4 min-w-[50vw] min-h-[50vh] bg-neutral-200 rounded-3xl"><label class="mb-2 font-bold" for="products-modal-name">Product Name</label><input id="products-modal-name" class="mb-4 p-2" type="text" placeholder="e.g. Apple"><label class="mb-2 font-bold" for="products-modal-description">Product Description</label><textarea id="products-modal-description" class="mb-4 p-2" placeholder="e.g. A bright red fruit that is sweet and tasty"></textarea><div class="mt-auto ml-auto text-lg font-bold"><button class="pl-4 font-bold hover:underline">Save</button><button class="pl-4 font-bold hover:underline">Cancel</button></div></div></div><div id="products-topbar" class="flex text-4xl"><h1 class="">Products</h1><button class="ml-auto font-bold">+</button></div><ul id="products-list" class="px-4 py-8 flex flex-wrap"></ul><button>Inject Test Data</button></div>'),J={id:null,name:"",description:""};function ge(){const[f,c,m,p,g,v]=pe(),[d,a]=y(!1),[l,u]=y(J);U(()=>{document.addEventListener("keydown",n=>{const s=d(),_=l();n.key=="Escape"?h():n.key=="Enter"?s=="view"?h():s=="edit"&&(n.preventDefault(),o()):n.key=="Delete"&&s=="view"&&_.id!=null&&b(_.id)})});function t(){u(J),a("edit")}function e(n){n==null?h():(u(m(n)),a("view"))}function r(n){u(m(n)),a("edit")}function o(){const n=l();let s=n.id;s===null?s=c(n.name,n.description):p(s,n.name,n.description),e(s)}function b(n){g(n),a(!1)}function h(){a(!1)}return(()=>{const n=B($e),s=n.firstChild,_=s.firstChild,C=_.firstChild,X=C.firstChild,Y=X.nextSibling,[q,Q]=G(Y.nextSibling),E=C.nextSibling,P=E.nextSibling,V=P.nextSibling,T=V.firstChild,N=T.nextSibling,W=N.nextSibling,k=s.nextSibling,Z=k.firstChild,ee=Z.firstChild,w=ee.nextSibling,te=w.nextSibling,A=te.nextSibling,ne=A.nextSibling,D=ne.firstChild,ie=D.nextSibling,I=k.nextSibling,le=I.firstChild,re=le.nextSibling,O=I.nextSibling,oe=O.nextSibling;return $(C,(()=>{const i=de(()=>!!l().id,!0);return()=>i()?l().id.toString().padStart(4,"0"):""})(),q,Q),$(E,()=>l().name),$(P,()=>l().description),T.$$click=()=>r(l().id),N.$$click=()=>b(l().id),W.$$click=()=>h(),w.$$input=i=>u(x=>({...x,name:i.currentTarget.value})),A.$$input=i=>u(x=>({...x,description:i.currentTarget.value})),D.$$click=()=>o(),ie.$$click=()=>e(l().id),re.$$click=()=>t(),$(O,R(ue,{get each(){return f()},children:i=>R(be,{product:i,onClick:()=>e(i.id)})})),oe.$$click=()=>v(),ae(i=>{const x=`fixed inset-0 flex flex-col justify-center items-center bg-black/20 backdrop-blur-md ${d()=="view"?"":"hidden"}`,M=`fixed inset-0 flex flex-col justify-center items-center bg-black/20 backdrop-blur-md ${d()=="edit"?"":"hidden"}`,j=l().name,F=l().description;return x!==i._v$&&(s.className=i._v$=x),M!==i._v$2&&(k.className=i._v$2=M),j!==i._v$3&&(w.value=i._v$3=j),F!==i._v$4&&(A.value=i._v$4=F),i},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),H(),n})()}z(["click","input"]);export{ge as default};
